#### Make this file with MakeBaseTestMakefile.pl, *not* by editing the file itself
PATH_TO_A2C=..
BUILD=release
MONO:IARG = -I$(PATH_TO_A2C)/runtime/C
MONO:A2C_LIB = $(PATH_TO_A2C)/runtime/C/A2C_Runtime.lib
MONO:A2C_EXE = mono $(PATH_TO_A2C)/a2c.exe
NET:CFLAGS=/Zi /W4 /Gy -I$(PATH_TO_A2C)\runtime\c
NET:A2C_LIB=$(PATH_TO_A2C)\runtime\C\$(BUILD)\A2C_Runtime.lib
NET:A2C_EXE=$(PATH_TO_A2C)\a2c.exe

2560:
	$(A2C_EXE) -out=test-temp  rfc2560.asn rfc3279.asn rfc4055.asn rfc5280.asn pkix-common.asn algorithm-class.asn
2986:
	$(A2C_EXE) -out=test-temp  rfc2986.asn rfc3279.asn rfc4055.asn rfc5280.asn pkix-common.asn algorithm-class.asn
3279:
	$(A2C_EXE) -out=test-temp  rfc3279.asn rfc4055.asn rfc5280.asn pkix-common.asn algorithm-class.asn
3281:
	$(A2C_EXE) -out=test-temp  rfc3281.asn rfc3279.asn rfc4055.asn rfc5280.asn pkix-common.asn algorithm-class.asn
3370:
	$(A2C_EXE) -out=test-temp  rfc3370.asn rfc3279.asn rfc3281.asn rfc3851.asn rfc3852.asn rfc3852a.asn rfc4055.asn rfc5280.asn pkix-common.asn algorithm-class.asn
3565:
	$(A2C_EXE) -out=test-temp  rfc3565.asn rfc3279.asn rfc4055.asn rfc5280.asn pkix-common.asn algorithm-class.asn
3851:
	$(A2C_EXE) -out=test-temp  rfc3851.asn rfc3279.asn rfc4055.asn rfc3852.asn rfc5280.asn rfc3281.asn rfc3370.asn rfc3852a.asn pkix-common.asn  algorithm-class.asn
3852:
	$(A2C_EXE) -out=test-temp  rfc3852.asn rfc3279.asn rfc3281.asn rfc3370.asn rfc3851.asn rfc3852a.asn rfc4055.asn rfc5280.asn pkix-common.asn algorithm-class.asn
3852a:
	$(A2C_EXE) -out=test-temp  rfc3852a.asn rfc3279.asn rfc3281.asn rfc4055.asn rfc5280.asn pkix-common.asn algorithm-class.asn
4055:
	$(A2C_EXE) -out=test-temp  rfc4055.asn rfc3279.asn rfc5280.asn pkix-common.asn algorithm-class.asn
4108:
	$(A2C_EXE) -out=test-temp  rfc4108.asn rfc3279.asn rfc3281.asn rfc3851.asn rfc3852.asn rfc3370.asn rfc3852a.asn rfc4055.asn rfc5280.asn pkix-common.asn algorithm-class.asn
4120:
	$(A2C_EXE) -out=test-temp  rfc4120.asn
4210:
	$(A2C_EXE) -out=test-temp  rfc4210.asn rfc2986.asn rfc3279.asn rfc3851.asn rfc3852.asn rfc3281.asn rfc3370.asn rfc3852a.asn rfc4055.asn rfc4211.asn rfc5280.asn pkix-common.asn algorithm-class.asn
4211:
	$(A2C_EXE) -out=test-temp  rfc4211.asn rfc2986.asn rfc3279.asn rfc3281.asn rfc3370.asn rfc3851.asn rfc3852.asn rfc3852a.asn rfc4055.asn rfc4210.asn rfc5280.asn pkix-common.asn algorithm-class.asn 
4556:
	$(A2C_EXE) -out=test-temp  rfc4556.asn rfc3279.asn rfc4055.asn rfc4120.asn rfc5280.asn pkix-common.asn algorithm-class.asn 
4998:
	$(A2C_EXE) -out=test-temp  rfc4998.asn rfc3279.asn rfc3281.asn rfc3370.asn rfc3851.asn rfc3852.asn rfc3852a.asn rfc4055.asn rfc5280.asn pkix-common.asn algorithm-class.asn 
5035:
	$(A2C_EXE) -out=test-temp  rfc5035.asn rfc3279.asn rfc3281.asn rfc3370.asn rfc3851.asn rfc3852.asn rfc3852a.asn rfc4055.asn rfc5280.asn pkix-common.asn algorithm-class.asn 
5055:
	$(A2C_EXE) -out=test-temp  rfc5055.asn rfc2560.asn rfc3279.asn rfc3281.asn rfc3370.asn rfc3851.asn rfc3852.asn rfc3852a.asn rfc4055.asn rfc5280.asn pkix-common.asn algorithm-class.asn 
5083:
	$(A2C_EXE) -out=test-temp  rfc5083.asn rfc3279.asn rfc3281.asn rfc3370.asn rfc3851.asn rfc3852.asn rfc3852a.asn rfc4055.asn rfc5280.asn pkix-common.asn algorithm-class.asn 
5084:
	$(A2C_EXE) -out=test-temp  rfc5084.asn rfc3279.asn rfc4055.asn rfc5280.asn pkix-common.asn algorithm-class.asn
5272:
	$(A2C_EXE) -out=test-temp  rfc5272.asn rfc3281.asn rfc3279.asn rfc3370.asn rfc3851.asn rfc3852.asn rfc3852a.asn rfc4055.asn rfc4211.asn rfc5280.asn pkix-common.asn algorithm-class.asn
5275:
	$(A2C_EXE) -out=test-temp  rfc5275.asn rfc2560.asn rfc2986.asn rfc3279.asn rfc3281.asn rfc3565.asn rfc3370.asn rfc3851.asn rfc3852.asn rfc3852a.asn rfc4055.asn rfc4210.asn rfc4211.asn rfc5055.asn rfc5280.asn rfc5272.asn pkix-common.asn algorithm-class.asn 
5280:
	$(A2C_EXE) -out=test-temp  rfc5280.asn rfc3279.asn rfc4055.asn pkix-common.asn algorithm-class.asn
5755:
	$(A2C_EXE) -out=test-temp  rfc5755.asn rfc3279.asn rfc3281.asn rfc3370.asn rfc3851.asn rfc3852.asn rfc3852a.asn rfc4055.asn rfc5280.asn pkix-common.asn algorithm-class.asn
algorithm-class:
	$(A2C_EXE) -out=test-temp  algorithm-class.asn rfc3279.asn rfc4055.asn rfc5280.asn pkix-common.asn
pkix-common:
	$(A2C_EXE) -out=test-temp  pkix-common.asn

rfcs: 2560 2986 3279 3281 3370 3565 3851 3852 3852a 4055 4108 4120 4210 4211 4556 4998 5035 5055 5083 5084 5272 5275 5280 5755 algorithm-class pkix-common 

program-1:
MONO:	@echo "Building and running example-1"
MONO:	$(A2C_EXE) -inline=static example-1.asn
MONO:	gcc -pedantic -o example-1 $(IARG) program-1.c example-1.c $(A2C_LIB)
MONO:	./example-1
MONO:	@echo
NET:	@echo Building and running example-1
NET:	$(A2C_EXE) -inline=yes example-1.asn
NET:	cl $(CFLAGS) $(A2C_LIB) program-1.c example-1.c /Feexample-1.exe /link /MANIFEST
NET:	example-1.exe

program-everything:
MONO:	@echo "Building and running example-everything"
MONO:	$(A2C_EXE) -inline=static example-everything.asn
MONO:	gcc -pedantic -o example-everything $(IARG) program-everything.c example-everything.c $(A2C_LIB)
MONO:	./example-everything
MONO:	@echo
NET:	@echo Building and running example-everything
NET:	$(A2C_EXE) -inline=yes example-everything.asn
NET:	cl $(CFLAGS)  $(A2C_LIB) program-everything.c example-everything.c /Feexample-everything.exe /MDd /link /MANIFEST
NET:	example-everything.exe

run-decodeber: decodeber.exe
	decodeber AliceDSSSignByCarlNoInherit.cer

decodeber.exe: decodeber.c rfc5280.c
	cl $(CFLAGS) $(A2C_LIB) decodeber.c rfc5280.c /Fedecodeber.exe /link /MANIFEST

rfc5280.c: rfc5280.asn $(A2C_EXE)
	$(A2C_EXE) -out=rfc5280  rfc5280.asn rfc3279.asn rfc4055.asn pkix-common.asn algorithm-class.asn

all:
MONO:	make program-1; make program-everything; make rfcs
NET:	nmake program-1
NET:	nmake program-everything
NET:	nmake rfcs
NET:	nmake run-decodeber
